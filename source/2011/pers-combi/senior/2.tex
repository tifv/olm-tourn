В некоторой стране имеется $n$ провинциальных городов и столица.
Столица соединена прямыми беспосадочными авиарейсами со всеми городами.
Кроме того, некоторые пары провинциальных городов также соединены авиарейсами,
причем из любого провинциального города можно единственным образом добраться
самолетом до любого другого
(возможно, с пересадками в других провинциальных городах~--- но не в столице),
не залетая в один и тот же город дважды.
Правительство хочет сделать каждое действующее авианаправление односторонним
так, чтобы, вылетев из любого города, в него нельзя было вернуться.
Сколько способов у правительства осуществить свой план?
(Например, для $n = 2$ ответ~--- $6$ способов).

\solution
\emph{Ответ:} $2 \cdot 3^{n-1}$.
Докажем ответ по индукции.
База $n = 1$ очевидна.
Пусть $n > 1$.
Рассмотрим сначала только провинциальные города и соединяющие их авиалинии.
Покажем, что найдется провинциальный город $A$, из которого выходит ровно одна
авиалиния (не в столицу).
Для этого выберем любой город и будем из него лететь по новым авиалиниям, пока
это возможно.
Либо мы встретим город, в котором мы уже были, но тогда образуется цикл, а
значит между любыми двумя городами этого цикла уже есть два пути, что
противоречит условию, либо мы попадем в город, из которого нельзя вылететь по
новой авиалинии, что и означает, что из этого города выходит ровно одна
авиалиния (та, по которой мы в него прилетели).
Теперь рассмотрим опять все города и отбросим город $A$.
Несложно видеть, что между любыми двумя провинциальными городами по прежнему
есть только один путь, проходящий только по провинциальным городам.
Значит, без отброшенного города, количество способов ориентировать оставшиеся
авиалинии требуемым образом равно $2 \cdot 3^{n-2}$ по предположению индукции.
Пусть из города $A$ есть авиалинии в провинциальный город $B$ и в столицу $S$.
Заметим, что для двух данных ребер годятся все ориентации, которые не образуют
цикл с ребром $SB$.
Действительно, если при таких ориентациях образовался цикл, в каком-то
направлении проходящий путь $SAB$, то ребро $SB$ ориентировано также, как и
этот путь (так как они не образуют цикл), а тогда цикл был бы и раньше~---
с ребром $SB$, но это невозможно.
Требуемых ориентаций ровно 3, а это значит, что нужно умножить
$2 \cdot 3^{n-2}$ на 3, и получится требуемое. 

