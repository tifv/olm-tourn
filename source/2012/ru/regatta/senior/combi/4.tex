\ifsolution
\begin{figure}\centering
    \jeolmfigure[width=0.5\textwidth]{solution}
    \caption{к решению задачи \ref{solution:2012/ru/regatta/senior/combi/4}}
    \label{fig:solution:2012/ru/regatta/senior/combi/4}
\end{figure}%
\fi % \ifsolution

\problem
Сколькими способами куб $n \times n \times n$ можно разрезать на бруски
$1 \times 1 \times n$?
\solution
\label{solution:2012/ru/regatta/senior/combi/4}%
\emph{Ответ:} $3(2^n - 1)$.
Длинные стороны брусков параллельны ребрам куба, таких направлений~--- три.
Допустим, в разбиении нашлись три бруска $B_1$, $B_2$, $B_3$ трех разных
направлений.
Проведем через $B_1$ слой $1 \times n \times n$ параллельно $B_2$,
через $B_2$~--- слой параллельно $B_3$, через $B_3$~--- параллельно $B_1$.
Рис.~\ref{fig:solution:2012/ru/regatta/senior/combi/4}.
Слои не параллельны, поэтому пересекутся по какому-то кубику $K$
$K$ не принадлежит ни одному из брусков, так как каждый брусок не лежит в
одном из слоев.
Однако видно, что какое бы направление ни было у проходящего через $K$ бруска,
он пересечется с одним из $B_1$, $B_2$, $B_3$.
Противоречие.
Значит, для любого разбиения есть бруски не более чем двух направлений, и куб
можно разбить на параллельные им слои.
При подсчете числа разбиений будем сначала выбирать направление слоев
(тут есть 3 способа), а затем~--- направление брусков в каждом слое
(2 способа).
Итого получим $3 \cdot 2^n$ разбиений.
Однако три разбиения~--- те, где все бруски параллельны друг другу~---
сосчитаны по 2 раза, их надо вычесть.
\endproblem
