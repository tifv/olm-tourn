$labels:
- &leagues
  [junior, senior]
- &junior-name
  Младшая лига
- &senior-name
  Старшая лига
- &regatta-subjects
  [algbr, geomt, combi]
- &regatta-tours
  4
- &written-preamble
  {postword: 'written{240 минут}{7}'}
- &oral-preamble
  {postword: 'oral{240 минут}{3}'}
- &team-preamble
  {postword: 'teamoral{240 минут}{3}'}
- &fluid-numeration
  {verbatim: '\makeatletter\def\problem@itemy#1{\item}\makeatother'}
- &tourn-fluid-problems
  - ../regatta/problems
  - ../pers-algbr/problems
  - ../pers-geomt/problems
  - ../pers-combi/problems
  - ../team/problems
- &tourn-fluid-complete
  - ../regatta/complete
  - ../pers-algbr/complete
  - ../pers-geomt/complete
  - ../pers-combi/complete
  - ../team/complete

archive:
  $delegate:
  - /miscellany
  - /miscellany/problems

miscellany:
  $fluid:
  - {verbatim: '\part*{2011}'}
  - /2011/complete
  - {verbatim: '\part*{2012}'}
  - /2012/complete
  - {verbatim: '\part*{2013}'}
  - /2013/complete
  $fluid$opt:
    preamble:
    - *fluid-numeration
  problems:
    $fluid:
    - {verbatim: '\part*{2011}'}
    - /2011/problems
    - {verbatim: '\part*{2012}'}
    - /2012/problems
    - {verbatim: '\part*{2013}'}
    - /2013/problems
    $fluid$opt:
      preamble:
      - *fluid-numeration

# 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011 2011
'2011':
  complete:
    $fluid: *tourn-fluid-complete
  problems:
    $fluid: *tourn-fluid-problems
  $style: [/base, extension]

  pers-algbr:
    $contest:
      name: "Алгебра и теория чисел"
        #"Личная письменная олимпиада <<Алгебра и теория чисел>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        problems: 4
      $rigid: [[., .], [., .]]
    senior:
      $contest$league:
        name: *senior-name
        problems: 4
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 12pt
    $rigid$opt:
      preamble:
      - *written-preamble

  pers-geomt:
    $contest:
      name: "Геометрия"
        #"Личная письменная олимпиада <<Геометрия>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        problems: 4
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 12pt
    senior:
      $contest$league:
        name: *senior-name
        problems: 4
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 12pt
    $rigid$opt:
      preamble: 
      - *written-preamble

  pers-combi:
    $contest:
      name: "Комбинаторика и логика"
        #"Личная устная олимпиада <<Комбинаторика и логика>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        problems: 5
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 12pt
        selectsize: [12, 14]
    senior:
      $contest$league:
        name: *senior-name
        problems: 5
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 11pt
        selectsize: [11, 13.4]
    $rigid$opt:
      preamble:
      - *oral-preamble

  team:
    $contest:
      name: "Командная устная олимпиада"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        problems: 8
      $rigid: [[.]]
      $rigid$opt:
        font: 12pt
    senior:
      $contest$league:
        name: *senior-name
        problems: 9
      $rigid: [[.]]
      $rigid$opt:
        font: 12pt
    $rigid$opt:
      preamble:
      - *team-preamble

  regatta:
    $regatta:
      name: "Регата"
      leagues: *leagues
    junior:
      $regatta$league:
        name: *junior-name
        subjects: *regatta-subjects
        tours: *regatta-tours
      algbr: &2011-regatta-algbr
        $regatta$subject:
          name: Алгебра и теория чисел
          index: 'a'
      geomt: &2011-regatta-geomt
        $regatta$subject:
          name: Геометрия
          index: 'b'
      combi: &2011-regatta-combi
        $regatta$subject:
          name: Комбинаторика
          index: 'c'
      "1": &2011-regatta-1
        $regatta$tour:
          name: Первый тур
          index: '1'
          mark: 4
      "2": &2011-regatta-2
        $regatta$tour:
          name: Второй тур
          index: '2'
          mark: 5
      "3": &2011-regatta-3
        $regatta$tour:
          name: Третий тур
          index: '3'
          mark: 6
      "4": &2011-regatta-4
        $regatta$tour:
          name: Четвертый тур
          index: '4'
          mark: 5
    senior:
      $regatta$league:
        name: *senior-name
        subjects: *regatta-subjects
        tours: *regatta-tours
      algbr: *2011-regatta-algbr
      geomt: *2011-regatta-geomt
      combi: *2011-regatta-combi
      "1": *2011-regatta-1
      "2": *2011-regatta-2
      "3": *2011-regatta-3
      "4": *2011-regatta-4


# 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 2012
'2012':
  problems:
    $fluid: *tourn-fluid-problems
  complete:
    $fluid: *tourn-fluid-complete
  $style: [/base, extension]

  pers-algbr:
    $contest:
      name: "Алгебра и теория чисел"
        #"Личная письменная олимпиада <<Алгебра и теория чисел>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        contest: ..
        problems: 4
      $rigid: [[., .], [., .]]
    senior:
      $contest$league:
        name: *senior-name
        contest: ..
        problems: 4
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 12pt
    $rigid$opt:
      preamble:
      - *written-preamble

  pers-geomt:
    $contest:
      name: "Геометрия"
        #"Личная письменная олимпиада <<Геометрия>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        contest: ..
        problems: 4
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 12pt
    senior:
      $contest$league:
        name: *senior-name
        contest: ..
        problems: 4
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 12pt
    $rigid$opt:
      preamble: 
      - *written-preamble

  pers-combi:
    $contest:
      name: "Комбинаторика и логика"
        #"Личная устная олимпиада <<Комбинаторика и логика>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        contest: ..
        problems: 5
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 12pt
        selectsize: [12, 14]
    senior:
      $contest$league:
        name: *senior-name
        contest: ..
        problems: 5
      $rigid: [[.], [.]]
      $rigid$opt:
        font: 11pt
        selectsize: [11, 13.4]
    $rigid$opt:
      preamble:
      - *oral-preamble

  team:
    $contest:
      name: "Командная устная олимпиада"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        contest: ..
        problems: 10
      $rigid: [[.]]
      $rigid$opt:
        font: 12pt
    senior:
      $contest$league:
        name: *senior-name
        contest: ..
        problems: 10
      $rigid: [[.]]
      $rigid$opt:
        font: 12pt
    $rigid$opt:
        preamble:
        - *team-preamble

  regatta:
    $regatta:
      name: "Регата"
      leagues: *leagues
    junior:
      $regatta$league:
        name: *junior-name
        subjects: *regatta-subjects
        tours: *regatta-tours
      algbr: &2012-regatta-algbr
        $regatta$subject:
          name: Алгебра и теория чисел
          index: 'a'
      geomt: &2012-regatta-geomt
        $regatta$subject:
          name: Геометрия
          index: 'b'
      combi: &2012-regatta-combi
        $regatta$subject:
          name: Комбинаторика
          index: 'c'
      "1": &2012-regatta-1
        $regatta$tour:
          name: Первый тур
          index: '1'
          mark: 4
      "2": &2012-regatta-2
        $regatta$tour:
          name: Второй тур
          index: '2'
          mark: 5
      "3": &2012-regatta-3
        $regatta$tour:
          name: Третий тур
          index: '3'
          mark: 6
      "4": &2012-regatta-4
        $regatta$tour:
          name: Четвертый тур
          index: '4'
          mark: 5
    senior:
      $regatta$league:
        name: *senior-name
        subjects: *regatta-subjects
        tours: *regatta-tours
      algbr: *2012-regatta-algbr
      geomt: *2012-regatta-geomt
      combi: *2012-regatta-combi
      "1": *2012-regatta-1
      "2": *2012-regatta-2
      "3": *2012-regatta-3
      "4": *2012-regatta-4

# 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013 2013
'2013':
  problems:
    $fluid: *tourn-fluid-problems
  complete:
    $fluid: *tourn-fluid-complete
  $style: [/base, extension]

  pers-algbr:
    $contest:
      name: "Алгебра и теория чисел"
        #"Личная письменная олимпиада <<Алгебра и теория чисел>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        problems: 4
      $rigid: [[.], [.]]
    senior:
      $contest$league:
        name: *senior-name
        problems: 4
      $rigid: [[.], [.]]
    $rigid$opt:
      preamble:
      - *written-preamble

  pers-geomt:
    $contest:
      name: "Геометрия"
        #"Личная письменная олимпиада <<Геометрия>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        problems: 4
      $rigid: [[.], [.]]
    senior:
      $contest$league:
        name: *senior-name
        problems: 4
      $rigid: [[.], [.]]
    $rigid$opt:
      preamble: 
      - *written-preamble

  pers-combi:
    $contest:
      name: "Комбинаторика и логика"
        #"Личная устная олимпиада <<Комбинаторика и логика>>"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        problems: 5
      $rigid: [[.], [.]]
    senior:
      $contest$league:
        name: *senior-name
        problems: 5
      $rigid: [[.], [.]]
    $rigid$opt:
      preamble:
      - *oral-preamble

  team:
    $contest:
      name: "Командная устная олимпиада"
      leagues: *leagues
    junior:
      $contest$league:
        name: *junior-name
        problems: 10
      $rigid: [[.], [.]]
    senior:
      $contest$league:
        name: *senior-name
        problems: 10
      $rigid: [[.]]
    $rigid$opt:
      preamble:
      - *team-preamble

  regatta:
    $regatta:
      name: "Регата"
      leagues: *leagues
    junior:
      $regatta$league:
        name: *junior-name
        subjects: *regatta-subjects
        tours: *regatta-tours
      algbr: &2013-regatta-algbr
        $regatta$subject:
          name: Алгебра и теория чисел
          index: 'a'
      geomt: &2013-regatta-geomt
        $regatta$subject:
          name: Геометрия
          index: 'b'
      combi: &2013-regatta-combi
        $regatta$subject:
          name: Комбинаторика
          index: 'c'
      "1": &2013-regatta-1
        $regatta$tour:
          name: Первый тур
          index: '1'
          mark: 4
      "2": &2013-regatta-2
        $regatta$tour:
          name: Второй тур
          index: '2'
          mark: 5
      "3": &2013-regatta-3
        $regatta$tour:
          name: Третий тур
          index: '3'
          mark: 6
      "4": &2013-regatta-4
        $regatta$tour:
          name: Четвертый тур
          index: '4'
          mark: 5
    senior:
      $regatta$league:
        name: *senior-name
        subjects: *regatta-subjects
        tours: *regatta-tours
      algbr: *2013-regatta-algbr
      geomt: *2013-regatta-geomt
      combi: *2013-regatta-combi
      "1": *2013-regatta-1
      "2": *2013-regatta-2
      "3": *2013-regatta-3
      "4": *2013-regatta-4

