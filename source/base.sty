\usepackage{jeolm}
\usepackage{jeolm-olymp}

\usepackage{catchfile}

\parindent=0pt

% default figures placement
\def\fps@figure{tb}

\usepackage{pgfpages}
\pgfpagesuselayout{resize to}[a4paper]

\def\problemmark#1{\textsf{(#1)}}

\let\postword\relax

\renewcommand\jeolmheadertemplate[3]{%
\vspace{1.5em}%
{\small\sffamily
\centerline{\bfseries #1}%
\centerline{{#2}\quad
{\itshape #3}}%
\vspace{1ex}%
\smash{\parbox{\textwidth}{\hrulefill\quad
{\large\bfseries\raisebox{-0.5ex}{\jeolmheaderleague}}%
\quad\hrulefill}}}%
\@ifnextchar*{\@gobble}{\vspace{-2em}}}
\renewcommand\jeolmheaderset[3]{%
\newcommand\jeolmheader{\jeolmheadertemplate{#1}{#2}{#3}}}


% Problem/solution segregation
\def\fetchproblemsolution#1{\begingroup
\CatchFileDef{\theinput}{#1}{}%
\expandafter\parseproblemsolution\theinput\endproblem
\endgroup}
\long\def\parseproblemsolution#1\solution#2\endproblem{%
\@ifnextchar[{\parsepreproblem}{\parseproblem}#1\endproblem
\@ifnextchar[{\parsepresolution}{\parsesolution}#2\endsolution}
\long\def\parsepreproblem[#1]#2\endproblem{%
    \global\def\preproblem@fetched{#1}%
    \global\def\problem@fetched{#2}}
\long\def\parseproblem#1\endproblem{%
    \global\def\preproblem@fetched{}%
    \global\def\problem@fetched{#1}}
\long\def\parsepresolution[#1]#2\endsolution{%
    \global\def\presolution@fetched{#1}%
    \global\def\solution@fetched{#2}}
\long\def\parsesolution#1\endsolution{%
    \global\def\presolution@fetched{}%
    \global\def\solution@fetched{#1}}

\newcommand\problemsolutioninput[2]{\fetchproblemsolution{#2}%
{\preproblem@fetched\presolution@fetched}%
#1\problem@fetched\solution@delimiter\solution@fetched}
\newcommand\probleminput[2]{\fetchproblemsolution{#2}%
\preproblem@fetched#1\problem@fetched}
\newcommand\solutioninput[2]{\fetchproblemsolution{#2}%
\presolution@fetched#1\solution@fetched}

\newcommand\solution@delimiter{$\square$\quad}

